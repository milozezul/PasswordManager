@using PManagerFrontend.Models.Components
@using SharedModels.DataService
<div class="flex flex-row items-center py-1 gap-x-5 hover:bg-neutral-600 pl-30" @onclick="OpenPassword">
    @if (Folder.IsActive)
    {
        if (!string.IsNullOrEmpty(Folder.Value))
        {
            <img src="icons/unlocked.svg" class="w-3 h-3" />
            <div class="text-white text-xs text-center w-35 bg-white/10 rounded-sm cursor-pointer">UNLOCKED</div>
        }
        else
        {
            <img src="icons/locked.svg" class="w-3 h-3" />
            <div class="text-white text-xs text-center w-35 bg-red-500/30 rounded-sm cursor-pointer">LOCKED</div>
        }
    }
    else
    {
        <img src="icons/locked.svg" class="w-3 h-3" />
        <div class="text-white text-xs text-center w-35 bg-red-500/30 rounded-sm cursor-pointer">@Folder.Value</div>
    }    
</div>

@code {
    [Parameter, EditorRequired]
    public DecryptedPassword Folder { get; set; }

    [Parameter, EditorRequired]
    public GroupFolderModel Group { get; set; }

    [Parameter, EditorRequired]
    public RecordFolderModel Record { get; set; }

    [Parameter, EditorRequired]
    public EventCallback<(DecryptedPassword password, RecordFolderModel record, GroupFolderModel group)> OpenPasswordHandler { get; set; }

    async Task OpenPassword()
    {
        await OpenPasswordHandler.InvokeAsync((Folder, Record, Group));
    }
}
